Given the following Java code snippet:
import com.fazecast.jSerialComm.SerialPort;
import com.fazecast.jSerialComm.SerialPortDataListener;
import com.fazecast.jSerialComm.SerialPortEvent;
import java.io.IOException;
import java.io.InputStream;
import java.util.Scanner;

public class SerialPortReader {

    public static void main(String[] args) {
        // 1. List available serial ports
        SerialPort[] comPorts = SerialPort.getCommPorts();

        if (comPorts.length == 0) {
            System.out.println("No serial ports found.");
            return;
        }

        System.out.println("Available Serial Ports:");
        for (int i = 0; i < comPorts.length; i++) {
            System.out.println(i + ": " + comPorts[i].getSystemPortName() + " (" + comPorts[i].getDescriptivePortName() + ")");
        }

        // 2. Select a port (for demonstration, let's pick the first one or ask the user)
        SerialPort chosenPort = null;
        if (comPorts.length > 0) {
            chosenPort = comPorts[0]; // Or uncomment the following to allow user input
            /*
            Scanner scanner = new Scanner(System.in);
            System.out.print("Enter the number of the port to open: ");
            int portIndex = scanner.nextInt();
            if (portIndex >= 0 && portIndex < comPorts.length) {
                chosenPort = comPorts[portIndex];
            } else {
                System.out.println("Invalid port selection.");
                scanner.close();
                return;
            }
            scanner.close();
            */
        }

        if (chosenPort == null) {
            System.out.println("No port selected or invalid selection.");
            return;
        }

        System.out.println("\nAttempting to open port: " + chosenPort.getSystemPortName());

        // 3. Open the port
        if (chosenPort.openPort()) {
            System.out.println("Port " + chosenPort.getSystemPortName() + " opened successfully.");

            // 4. Configure port parameters (adjust as needed for your device)
            chosenPort.setBaudRate(9600);           // Common baud rates: 9600, 19200, 38400, 115200
            chosenPort.setNumDataBits(8);           // 7 or 8
            chosenPort.setNumStopBits(SerialPort.ONE_STOP_BIT); // ONE_STOP_BIT, ONE_POINT_FIVE_STOP_BITS, TWO_STOP_BITS
            chosenPort.setParity(SerialPort.NO_PARITY); // NO_PARITY, EVEN_PARITY, ODD_PARITY, MARK_PARITY, SPACE_PARITY
            chosenPort.setFlowControl(SerialPort.FLOW_CONTROL_DISABLED); // FLOW_CONTROL_DISABLED, FLOW_CONTROL_RTS_ENABLED, etc.

            // Optional: Set timeouts for read operations (blocking read)
            chosenPort.setComPortTimeouts(SerialPort.TIMEOUT_READ_SEMI_BLOCKING, 0, 0);

            // 5. Read data (two common approaches):

            // Approach A: Event-driven reading (recommended for continuous data)
            System.out.println("\n--- Event-Driven Reading (listening for incoming data) ---");
            chosenPort.addDataListener(new SerialPortDataListener() {
                @Override
                public int get=-SerialPort.LISTENING_EVENT_DATA_AVAILABLE;

                @Override
                public void serialEvent(SerialPortEvent event) {
                    if (event.getEventType() == SerialPort.LISTENING_EVENT_DATA_AVAILABLE) {
                        byte[] newData = event.getReceivedData();
                        System.out.print("Received (" + newData.length + " bytes): ");
                        for (byte b : newData) {
                            System.out.print(String.format("%02X ", b)); // Print as hex
                        }
                        System.out.println(" | " + new String(newData)); // Try to print as string
                    }
                }
            });

            // Approach B: Blocking read (if you expect specific data packets)
            // This is less common for continuous streaming but useful for specific requests.
            // You would typically use this in a separate thread to avoid blocking your main application.
            /*
            System.out.println("\n--- Blocking Reading (will read 10 bytes after a delay) ---");
            try {
                // Give some time for the event listener to be set up or for data to arrive
                Thread.sleep(2000);

                // Read bytes directly from the port
                byte[] readBuffer = new byte[10]; // Buffer to hold read data
                int numRead = chosenPort.readBytes(readBuffer, readBuffer.length);
                if (numRead > 0) {
                    System.out.println("Blocking Read: Read " + numRead + " bytes. Data: " + new String(readBuffer, 0, numRead));
                } else {
                    System.out.println("Blocking Read: No bytes read.");
                }

                // Or use InputStream directly
                InputStream inputStream = chosenPort.getInputStream();
                byte[] streamBuffer = new byte[100];
                int bytesRead = inputStream.read(streamBuffer); // This will block until data is available or timeout
                if (bytesRead > 0) {
                    System.out.println("InputStream Read: Read " + bytesRead + " bytes. Data: " + new String(streamBuffer, 0, bytesRead));
                }
            } catch (InterruptedException | IOException e) {
                System.err.println("Error during blocking read: " + e.getMessage());
            }
            */

            // Keep the program running to receive events (for event-driven approach)
            System.out.println("\nListening for data... Press Enter to close the port and exit.");
            try {
                System.in.read(); // Wait for user input to close
            } catch (IOException e) {
                System.err.println("Error reading from console: " + e.getMessage());
            }

            // 6. Close the port when done
            chosenPort.closePort();
            System.out.println("Port " + chosenPort.getSystemPortName() + " closed.");

        } else {
            System.out.println("Failed to open port " + chosenPort.getSystemPortName());
        }
    }
}


the following improvements are recommended: rule key = java:S125 message = This block of commented-out lines of code should be removed., start line = 29, end line = 29, rule key = java:S125 message = This block of commented-out lines of code should be removed., start line = 89, end line = 89.
Please provide a revised version of the code snippet that applies the recommended improvements. Only the revised code snippet, without additional text.